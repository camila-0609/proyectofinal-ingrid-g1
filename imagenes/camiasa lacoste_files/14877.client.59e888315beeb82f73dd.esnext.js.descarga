(self.webpackChunk_portal_app_portal_cr=self.webpackChunk_portal_app_portal_cr||[]).push([[14877],{66570:(e,t,n)=>{"use strict";n.d(t,{XZ:()=>M,tp:()=>N,IA:()=>q,I0:()=>Z});var r=n(52903),i=n(22447),o=n(2784);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(null==e)return{};var n,r,i=d(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function d(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var s=(0,o.forwardRef)(function(e,t){var n=e.checked,i=e.defaultChecked,o=e.disabled,a=e.error,l=e.indeterminate,d=u(e,["checked","defaultChecked","disabled","error","indeterminate"]);return(0,r.jsx)("input",c({type:"checkbox",ref:t,"aria-invalid":a||null,"aria-checked":l&&!(n||i)?"mixed":null,checked:n,"data-indeterminate":l||null,defaultChecked:i,disabled:o},d))});s.defaultProps={disabled:!1,error:!1,indeterminate:!1},s.displayName="BaseCheckboxInput";let p=(0,i.withControllerContext)(s);var f=n(95476);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){m(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){if(null==e)return{};var n,r,i=h(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function h(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var g=(0,o.forwardRef)(function(e,t){var n=e.as,i=e.children,o=e.iconCheckedComponent,a=e.iconIndeterminateComponent,c=e.iconUncheckedComponent,l=e.indeterminate,u=(e.error,y(e,["as","children","iconCheckedComponent","iconIndeterminateComponent","iconUncheckedComponent","indeterminate","error"]));return(0,r.jsxs)(n,b(b({ref:t},u),{},{children:[i,(0,r.jsx)(c,{id:"checkboxEmpty","aria-hidden":"true"}),(0,r.jsx)(o,{id:"checkboxTick","aria-hidden":"true"}),l&&(0,r.jsx)(a,{id:"checkboxIndeterminate","aria-hidden":"true"})]}))});g.defaultProps={as:"div",checked:!1,disabled:!1,error:!1,iconCheckedComponent:f.Z,iconIndeterminateComponent:f.Z,iconUncheckedComponent:f.Z,indeterminate:!1},g.displayName="BaseCheckboxContainer";var w=n(38939),O='\n    position: absolute;\n    opacity: 0;\n    cursor: pointer;\n    height: var(--icons-medium-height);\n    width: var(--icons-medium-width);\n\n    &::before {\n        content: "";\n        position: absolute;\n        left: 50%;\n        top: 50%;\n        transform: translate(-50%, -50%);\n        width: 100%;\n        height: 4.4rem;\n        width: 4.4rem;\n    }\n',k=n(19681),j=(0,k.componentSelector)("Icon"),P=function(e){return"\n    ".concat(j,":not(:nth-of-type(").concat(e,")) {\n        display: none;\n    }\n\n    ").concat(j,":nth-of-type(").concat(e,") {\n        display: block;\n    }\n")},S="\n    ".concat(P(1),"\n"),E='\n    input[type="checkbox"]:checked ~ {\n        '.concat(P(2),"\n    }\n"),C='\n    [data-indeterminate="true"]:not(input[type="checkbox"]:checked) ~ {\n        '.concat(P(3),"\n    }\n"),x='\n    input[type="checkbox"]:disabled  {\n        pointer-events: none;\n\n        ~ '.concat(j," {\n            fill: var(--colors-forms-primary-default-disabled-icon);\n        }\n    }\n"),D='\n    input[type="checkbox"]:focus ~ '.concat(j,' {\n        outline: 0.1rem dashed;\n        outline: 0.1rem auto Highlight;\n        outline: 0.1rem auto -webkit-focus-ring-color;\n    }\n\n    input[type="checkbox"]:focus:not(:focus-visible) ~ ').concat(j,' {\n        outline: 0;\n    }\n\n    input[type="checkbox"]:focus-visible ~ ').concat(j," {\n        outline: 0.1rem dashed;\n        outline: 0.1rem auto Highlight;\n        outline: 0.1rem auto -webkit-focus-ring-color;\n    }\n"),I='\n    [aria-invalid="true"] ~ {\n        '.concat(j," {\n            fill: var(--colors-forms-primary-error-enabled-validation-icon);\n        }\n    }\n"),L="\n    ".concat(S,"\n    ").concat(E,"\n    ").concat(x,"\n    ").concat(D,"\n    ").concat(C,"\n    ").concat(I,"\n"),A=(0,w.Z)(g,{target:"ezzbqtn0"})("position:relative;width:fit-content;",L,";");let N=(0,k.withIdentifier)(A,"CheckboxContainer");function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach(function(t){B(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e,t){if(null==e)return{};var n,r,i=R(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function R(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var G=(0,o.forwardRef)(function(e,t){var n=e.containerComponent,i=e.indeterminate,o=U(e,["containerComponent","indeterminate"]);return(0,r.jsx)(n,{indeterminate:i,children:(0,r.jsx)(Z,T({indeterminate:i,ref:t},o))})});G.defaultProps={containerComponent:N,indeterminate:!1},G.displayName="BaseCheckbox";var V=function(e){return(0,k.withIdentifier)(G,e)},F=(0,w.Z)(p,{target:"e1bd397j0"})(O,";");let Z=(0,k.withIdentifier)(F,"CheckboxInput");var M=V("Checkbox"),q=V("CheckboxControlled")},63016:e=>{var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getUser"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"localUser"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tenant"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"client"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:46}};t.loc.source={body:"query getUser{localUser@client{tenant client}}",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function r(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach(function(e){r(e,t)}),e.variableDefinitions&&e.variableDefinitions.forEach(function(e){r(e,t)}),e.definitions&&e.definitions.forEach(function(e){r(e,t)})}var i={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var r=e.definitions[n];if(r.name&&r.name.value==t)return r}}function a(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,a=new Set,c=new Set;for(r.forEach(function(e){c.add(e)});c.size>0;){var l=c;c=new Set,l.forEach(function(e){a.has(e)||(a.add(e),(i[e]||new Set).forEach(function(e){c.add(e)}))})}return a.forEach(function(t){var r=o(e,t);r&&n.definitions.push(r)}),n}t.definitions.forEach(function(e){if(e.name){var t=new Set;r(e,t),i[e.name.value]=t}}),e.exports=t,e.exports.getUser=a(t,"getUser")},77797:(e,t,n)=>{"use strict";n.d(t,{S:()=>u});var r=n(2784),i=n(5769),o=n(63016),a=n.n(o);let c=null,l=null,u=()=>{let[e,t]=(0,r.useState)(null),[n,o]=(0,r.useState)(null),[u,s]=(0,r.useState)(!1),{data:p,loading:f,error:v}=(0,i.a)(a(),{ssr:!1}),b=(0,r.useCallback)(()=>{let t;let r=window.universal_variable,i=h();i&&r&&r.page&&r.user&&r.user.cookieId&&(e?t=i.PageTypes.LOGIN:n&&(t=i.PageTypes.REGISTER),i.track(d(r,i,t)))},[e,n]);return(0,r.useEffect)(()=>{let e=()=>{t(!0),o(!1)};document.addEventListener("vitorino:login",e,void 0);let n=()=>{t(!1)};document.addEventListener("vitorino:closeLogin",n);let r=()=>{t(!1),o(!0)};document.addEventListener("vitorino:register",r);let i=()=>{o(!1)};return document.addEventListener("vitorino:closeRegister",i),()=>{document.removeEventListener("vitorino:login",e),document.removeEventListener("vitorino:closeLogin",n),document.removeEventListener("vitorino:register",r),document.removeEventListener("vitorino:closeRegister",i)}},[]),(0,r.useEffect)(()=>{if(window.Vitorino&&"function"==typeof window.Vitorino.track){s(!0);return}let e=document.createElement("script");return e.id="vitorinoScriptElement",e.src="https://cdn-static.farfetch-contents.com/assets/vitorino/vitorino.min.js",e.async=!0,e.onload=()=>s(!0),document.body.appendChild(e),()=>document.body.removeChild(e)},[]),(0,r.useEffect)(()=>{if(f||!u)return;if(!v&&p&&p.localUser){let{localUser:{tenant:e,client:t}}=p;e&&(c=e),t&&(l=t)}let n=window.universal_variable,r=()=>b();return n&&n.page&&n.user?b():window.addEventListener("uvLoaded",r),()=>window.removeEventListener("uvLoaded",r)},[p,v,u,f,b]),null},d=(e,t,n)=>({tenantId:s(t),clientId:p(t),customerId:f(e),correlationId:v(e),page:n||b(e,t),origin:m(),environment:y(e,t)}),s=e=>c||e.MISSING_TENANT_ID,p=e=>l||e.MISSING_CLIENT_ID,f=e=>e.user.userId,v=e=>e.user.cookieId,b=(e,t)=>"login"===e.page.type?t.PageTypes.LOGIN:"checkout"===e.page.type&&"Review"===e.page.pageStep?t.PageTypes.CHECKOUT:e.user.checkoutType&&"ShippingAddress"===e.page.pageStep?t.PageTypes.SHIPPING:void 0,m=()=>"PORTAL_BOX",y=(e,t)=>"live"===e.page.environment?t.Environment.PRODUCTION:t.Environment.SANDBOX,h=()=>{if(void 0===window.Vitorino||!window.Vitorino)return null;let e=window.Vitorino;return e.PageTypes&&e.Environment?e:null}},93747:(e,t,n)=>{"use strict";n.d(t,{wi:()=>P,e9:()=>E});var r=n(28165),i=n(2784);let o=(0,i.createContext)({advertising:{value:!1,updatedAt:new Date(0)},functional:{value:!1,updatedAt:new Date(0)},performance:{value:!1,updatedAt:new Date(0)},ccpa:{value:!1,updatedAt:new Date(0)},setAdvertising:()=>{},setFunctional:()=>{},setPerformance:()=>{},setCcpa:()=>{},setAll:()=>{},updatedAt:new Date(0)});var a=n(52034),c=n.n(a);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){d(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function d(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){var t=p(e,"string");return"symbol"==typeof t?t:String(t)}function p(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}let f="ffcp",v={advertising:"advertising",functional:"functional",performance:"performance",ccpa:"ccpa",all:"all",updated:"updated"},b={advertising:"a",functional:"f",performance:"p",ccpa:"c"},m={a:"advertising",f:"functional",p:"performance",c:"ccpa"},y=e=>Math.floor(+e/1e3),h=e=>new Date(1e3*e),g=e=>Object.keys(b).map(t=>{let n=e[t],r=b[t],i=+n.value,o=y(n.updatedAt);return`${r}.${i}.${o}`}).join("_"),w=e=>{let t=e.indexOf(".");return t<0?"":e.substring(t).toLowerCase()},O=e=>{let t=Object.keys(b).reduce((t,n)=>u(u({},t),{},{[n]:{value:(null==e?void 0:e[n])||!1,updatedAt:new Date(0)}}),{updatedAt:new Date(0),updating:!1}),n=c().get(f);if(!n)return t;let r=n.split("_");return r.forEach(e=>{let[n,r,i]=e.split("."),o=m[n];if(!o)return;let a=!!+r,c=h(+i||0);t[o]={value:a,updatedAt:c},c>t.updatedAt&&(t.updatedAt=c)}),t},k=(e,t)=>{if(!v[t.type])return e;if(t.type===v.updated)return u(u({},e),{},{updating:!1});if(t.type===v.all){let n=new Date;return Object.keys(t.value).reduce((e,r)=>"boolean"!=typeof t.value[r]?e:u(u({},e),{},{[r]:{value:t.value[r],updatedAt:n}}),u(u({},e),{},{updating:!0}))}return u(u({},e),{},{[v[t.type]]:{value:t.value,updatedAt:new Date},updating:!0})};function j(e){return window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"consent_mode_updated",consentEvent:{consent:e}}),!0}let P=e=>{let{children:t,options:n}=e,[a,l]=(0,i.useReducer)(k,null==n?void 0:n.defaults,O);(0,i.useEffect)(()=>{if(!a.updating)return;let e=g(a),t=new Date;null!=n&&n.expires?t.setDate(t.getDate()+n.expires):t.setFullYear(t.getFullYear()+5),c().set(f,e,{expires:t,domain:w(window.location.hostname)||window.location.hostname}),j(a),l({type:v.updated})},[n,a]);let d=(0,i.useMemo)(()=>u(u({},a),{},{setAdvertising:e=>l({type:v.advertising,value:e}),setFunctional:e=>l({type:v.functional,value:e}),setPerformance:e=>l({type:v.performance,value:e}),setCcpa:e=>l({type:v.ccpa,value:e}),setAll:(e,t,n,r)=>l({type:v.all,value:{advertising:e,functional:t,performance:n,ccpa:r}})}),[a]);return(0,r.jsx)(o.Provider,{value:d},t)},S=()=>(0,i.useContext)(o),E=()=>{let{advertising:e,functional:t,performance:n,setAdvertising:r,setFunctional:o,setPerformance:a,setAll:c}=S();return(0,i.useMemo)(()=>({advertising:e,functional:t,performance:n,setAdvertising:r,setFunctional:o,setPerformance:a,setAll:(e,t,n)=>c(e,t,n),hasUpdatedConsent:!!(+e.updatedAt||+t.updatedAt||+n.updatedAt)}),[e,t,n,r,c,o,a])}},95883:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(28165),i=n(65536),o=n(2784);let a=(0,i.Vo)(()=>n.e(86299).then(n.bind(n,31769)).then(e=>{let{GdprBanner:t}=e;return t}),{moduleId:"../../node_modules/@modules/gdpr-banner/src/components/GdprBanner/index.js"}),c=e=>{let{initialState:t}=e;return(0,r.jsx)(i.BY,{fallback:null},(0,r.jsx)(a,{initialState:t}))};var l=n(93747);let u=e=>{let{initialState:t}=e,{hasUpdatedConsent:n}=(0,l.e9)(),i=(null==t?void 0:t.isCookieBannerEnabled)&&!n;return((0,o.useEffect)(()=>{if(null!=window.isCookiePreferencesBannerVisible)return;window.isCookiePreferencesBannerVisible=i;let e=new CustomEvent("cookiePreferencesBannerStatusReady");document.dispatchEvent(e)},[i]),i)?(0,r.jsx)(c,{initialState:t}):null};var d=n(80595);let s=(e,t)=>{let[n,r]=(0,o.useState)(e);return(0,o.useEffect)(()=>{t&&!n&&d.Mb.get("/messaging-slice/data-privacy/cookies").then(e=>e.data).then(r).catch(()=>{})},[n,t]),n};var p=n(52034),f=n.n(p);let v="portal-box",b=e=>{let{initialState:t}=e,[n,i]=(0,o.useState)(!1),a=s(null==t?void 0:t.gdpr,n);return((0,o.useEffect)(()=>{window.isGdprBannerLoaded=window.isGdprBannerLoaded||v,window.isGdprBannerLoaded===v&&"1"!==f().get("privacy-settings")&&i(!0)},[]),n&&a)?(0,r.jsx)(l.wi,{options:a.cookiePreferences},(0,r.jsx)(u,{initialState:a})):null},m=b}}]);